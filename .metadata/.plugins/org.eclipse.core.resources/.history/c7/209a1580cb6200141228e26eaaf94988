package audio;

import java.io.File;


public class Assignment6 {
	private static double THRESHOLD=30;
	private static int SECOND=2;
	public static void main(String[] args) {		
		if(!ParameterChecker.CheckFormat(args)){
			System.exit(-1);
		};
		Audio file1 = Audio.getInstance(args[1]);
		Audio file2 = Audio.getInstance(args[3]);
		if (isMatch(file1,file2)) {
			System.out.println("MATCH "+file1.getFileName()+" "+file2.getFileName());
		} else {
			System.out.println("NO MATCH");
		}
	}
	
	public static boolean isMatch(Audio file1, Audio file2){
		// fast method
		if(Math.abs(file1.getAudioLength()-file2.getAudioLength()) > SECOND){
			return false;
		}
		// accurate method
		else{
			double meanSquaredError = Audio.calculateMSE(file1,file2);
			return meanSquaredError < THRESHOLD;
		}
	}
	
	public static String[] getFilePaths(String path, String parameter){
		String[] filePaths=null;
		if(parameter.trim().equals("-f")){
			filePaths=new String[1];
			filePaths[0]=path;
		}
		else if(parameter.trim().equals("-d")){
			filePaths=new File(path).list();
		}
		return filePaths;
	}

}

